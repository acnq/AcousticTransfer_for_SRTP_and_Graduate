# 阶段性成果【计算】

<<<<<<< HEAD
## 1. 计算推导
=======
<img src="https://render.githubusercontent.com/render/math?math=e^{i \pi} = -1"> 

<img src="https://render.githubusercontent.com/render/math?math=\begin{aligned}
 & S_0^0(\bold{x}_i- \bold{x}_{0j}) &&= \frac{1}{2}\sqrt{\frac{1}{\pi}}\frac{\text{i}}{kr}e^{-\text{i}kr} \\
 & S_{1}^{-1}(\bold{x}_i - \bold{x}_{0j}) &&= -\frac{1}{2}\sqrt{\frac{3}{2\pi}}\frac{x - \text{i}y}{r}\frac{kr - \text{i}}{(kr)^2}e^{-\text{i}kr}\\
& S_{1}^{0}(\bold{x}_i - \bold{x}_{0j}) &&= -\frac{1}{2}\sqrt{\frac{3}{2\pi}}\frac{z}{r}\frac{kr - \text{i}}{(kr)^2}e^{-\text{i}kr} \\
 & S_{1}^{1}(\bold{x}_i - \bold{x}_{0j}) &&= \frac{1}{2}\sqrt{\frac{3}{2\pi}}\frac{x + \text{i}y}{r}\frac{kr - \text{i}}{(kr)^2} e^{-\text{i}kr} \\
 \end{aligned}">
 
>>>>>>> 86cb50674a3b8687c4d54583ef3eb98996b21fdd
$$
\begin{aligned}
 & S_0^0(\bold{x}_i- \bold{x}_{0j}) &&= \frac{1}{2}\sqrt{\frac{1}{\pi}}\frac{\text{i}}{kr}e^{-\text{i}kr} \\
 & S_{1}^{-1}(\bold{x}_i - \bold{x}_{0j}) &&= -\frac{1}{2}\sqrt{\frac{3}{2\pi}}\frac{x - \text{i}y}{r}\frac{kr - \text{i}}{(kr)^2}e^{-\text{i}kr}\\
& S_{1}^{0}(\bold{x}_i - \bold{x}_{0j}) &&= -\frac{1}{2}\sqrt{\frac{3}{2\pi}}\frac{z}{r}\frac{kr - \text{i}}{(kr)^2}e^{-\text{i}kr} \\
 & S_{1}^{1}(\bold{x}_i - \bold{x}_{0j}) &&= \frac{1}{2}\sqrt{\frac{3}{2\pi}}\frac{x + \text{i}y}{r}\frac{kr - \text{i}}{(kr)^2} e^{-\text{i}kr} \\
 \end{aligned}
$$
1. 这里 $r= |\bold{x}_i - \bold{x}_{0j}|=\sqrt{x^2 + y^2 + z^2} = \sqrt{(x_i - x_{0j})^2 + (y_i - y_{0j})^2 + (z_i - z_{0j})^2}$ 表示多极源到边界边界采样点的距离【注意我们使用的$x,y,z$符号的意义】, 
2. $k = \frac{\omega}{c}$是常数（仅仅和当前选定的频率和波速有关）,
3. $\text{i}$【非粗体的正体i】表示虚数单位。

他们的导数
$$
\begin{aligned}
    &\frac{\partial S_0^0(\bold{x}_i- \bold{x}_{0j})}{\partial \bold{n}_{\bold{x}_i}} &&= -\frac{1}{2}\sqrt{\frac{1}{\pi}}\frac{1}{kr^3}\text{i} e^{-\text{i}kr}(\text{i}kr + 1)[(\bold{x}_i - \bold{x}_{0j})\cdot\bold{n}(\bold{x}_i)]\\ 
    & \frac{\partial  S_{1}^{-1}(\bold{x}_i - \bold{x}_{0j})}{\partial \bold{n}_{\bold{x}_i}} &&= -\frac{1}{2}\sqrt{\frac{3}{2\pi}}e^{-\text{i}kr}\frac{1}{k^2r^5}\biggl\{(kr- \text{i})\begin{bmatrix}
        [r^2 - (x_i - x_{0j})^2] + \text{i}(x_i - x_{0j})(y_i - y_{0j})\\ 
        -\left\{(y_i - y_{0j})(x_i -x_{0j}) + \text{i}[r^2 - (y_i - y_{0j})^2]\right\}\\ 
        (z_i - z_{0j})[(x_i - x_{0j}) - \text{i}(y_i - y_{0j})]\\ 
    \end{bmatrix}\cdot\bold{n}(\bold{x}_i) \\ 
    &&& + [-2kr + \text{i}(2 - k^2r^2)][(x_i-x_{0j} )- \text{i}(y_i - y_{0j})][(\bold{x}_i - \bold{x}_{0j})\cdot\bold{n}(\bold{x}_i)]\biggr\}\\ 
    & \frac{\partial S_{1}^{0}(\bold{x}_i - \bold{x}_{0j})}{\partial \bold{n}_{\bold{x}_i}} &&= -\frac{1}{2}\sqrt{\frac{3}{2\pi}}e^{-\text{i}kr}\frac{1}{k^2r^5}\biggl\{ (kr- \text{i})\begin{bmatrix}
        (z_i - z_{0j})(x_i - x_{0j})\\ 
        (z_i - z_{0j})(y_i - y_{0j})\\ 
        r^2 - (z_i - z_{0j})^2\\ 
    \end{bmatrix}\cdot\bold{n}(\bold{x}_i)\\ 
    &&& + [-2kr + \text{i}(2 - k^2r^2)](z_i-z_{0j} )[(\bold{x}_i - \bold{x}_{0j})\cdot\bold{n}(\bold{x}_i)]\biggr\}\\ 
    & \frac{\partial  S_{1}^{1}(\bold{x}_i - \bold{x}_{0j})}{\partial \bold{n}_{\bold{x}_i}} &&= \frac{1}{2}\sqrt{\frac{3}{2\pi}}e^{-\text{i}kr}\frac{1}{k^2r^5}\biggl\{(kr- \text{i})\begin{bmatrix}
        [r^2 - (x_i - x_{0j})^2] - \text{i}(x_i - x_{0j})(y_i - y_{0j})\\ 
        -(y_i - y_{0j})(x_i -x_{0j}) + \text{i}[r^2 - (y_i - y_{0j})^2]\\ 
        (z_i - z_{0j})[(x_i - x_{0j}) + \text{i}(y_i - y_{0j})]\\ 
    \end{bmatrix}\cdot\bold{n}(\bold{x}_i) \\ 
    &&& + [-2kr + \text{i}(2 - k^2r^2)][(x_i-x_{0j} ) + \text{i}(y_i - y_{0j})][(\bold{x}_i - \bold{x}_{0j})\cdot\bold{n}(\bold{x}_i)]\biggr\}\\
\end{aligned}
$$
1. 其中 $(\bold{x}_i - \bold{x}_{0j})$写成$\begin{bmatrix}
    x_i - x_{0j}\\ 
    y_i - y_{0j}\\ 
    z_i - z_{0j}\\ 
\end{bmatrix}$ 其中$\begin{bmatrix}
    x_i \\ 
    y_i \\ 
    z_i \\ 
\end{bmatrix}$表示第i个采样点的坐标，而 $\begin{bmatrix}
    x_{0j} \\ 
    y_{0j} \\ 
    z_{0j} \\ 
\end{bmatrix}$表示第j个多极源的坐标
2. $\bold{n}(\bold{x}_i)$ 表示采样点$\bold{x}_i$位置处，物体的轮廓的发现方向【也需要用平面直角坐标系表示】

## 2. 解方程的思路和流程图
![image](\assets\思路分析.jpg)

## 3. 遗留问题
problem report:
1. $\frac{\partial S(\bold{x})}{\partial \bold{n}} = \nabla S(\bold{x})\cdot\bold{n}(\bold{x})$中，$\bold{n}(\bold{x})$需要单位化么，为什么？
2. 如图：
    ![image1](/assets/q2e1.png)
    ![image2](/assets/q2e2.png)
    这两个概念modal displacment/displacement mode 应该是同一个，modal analysis是如何把这些数据给到acoustic transfer的，以及是以什么样的形式给到的【我这边假定是如论文所暗示的一样，是在物体边界上的模态振动的直角坐标系表示，离散成M个点之后是M*3*1的数据类型【M*3】的向量，是否不妥？
3. 待定。。。
4. code is under coding, challenging

